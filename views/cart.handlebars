<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopop</title>
    <link rel="stylesheet" href="/cart.css">
    <link rel="stylesheet" href="/stripe-cart.css">
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?version=3.52.1&features=fetch"></script>
    <script src="/cart_js/stripe-cart.js" defer></script> 
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
   
</head>
<body>
    <div class="cartBody">
<div class="card">
    <div class="row">
        <div class="col-md-8 cart">
            <div class="title">
                <div class="row">
                    <div class="col">
                        <h4><b>Shopping Cart</b></h4>
                    </div>
                </div>
            </div>
            <div class="emptyCart" id="div1">
            {{#each data}}
            <div class="row cart-items" data-value="{{this.product_info_id}}">
            <hr>
                <div class="row main align-items-center cart-row">
                    <div class="col-2"><img class="img-fluid" src={{this.productPhoto.[0]}}></div>
                    <div class="col">
                        <div class="row text-muted">{{this.productCategory}}</div>
                        <div class="row">{{this.productName}}</div>
                    </div>
                    <div class="col "><input class="cart-quantity-input" max="{{this.stock}}" type="number" name="" id="" value="{{this.purchaseQuantity}}"></div>
                    <div class="col"><span class="cart-price"> ${{this.price}} </span><span class="close">&#10005;</span></div>
                    <div class="eachShippingPrice" data-value="{{this.shippingPrice}}"></div>
                </div>
            </div>
            {{/each}}
            </div>
    
            <div class="back-to-shop"><a href="/customer-homepage">&leftarrow;</a><span class="text-muted">Back to shop</span></div>
        </div>
        <div class="col-md-4 summary">
            <div>
                <h5><b>Summary</b></h5>
            </div>
            <hr>
            <div class="row">
                <div class="col item-quantity" style="padding-left:0;">ITEMS 3</div>
                <div class="col text-right cart-total-price">$ 0</div>
            </div>
            <form>
                {{!-- <p>SHIPPING</p>  --}}
                <select>
                    <option class="text-muted shippingPrice">Delivery- ${{totalShippingPrice}}</option>
                </select>
            </form>
            <div class="row" style="border-top: 1px solid rgba(0,0,0,.1); padding: 2vh 0;">
                <div class="col">TOTAL PRICE</div>
                <div class="col text-right total-price">$ 0</div>
            </div> 
            <br><br><br><br><br>
            <button type="button" class="btn btn-primary checkout-Btn" data-bs-toggle="modal" data-bs-target="#exampleModal">CHECKOUT</button>
        </div>
    </div>
</div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <form id="payment-form">
                <div id="card-element"><!--Stripe.js injects the Card Element--></div>
                <button  id="submit" class="checkoutBtn">
                    <div class="spinner hidden" id="spinner"></div>
                    <span id="button-text">Pay now</span>
                </button>
                <p id="card-error" role="alert"></p>
                <p class="result-message hidden">
                    Payment succeeded, see the result in your
                    <a href="" target="_blank">Stripe dashboard.</a> Refresh the page to pay
                    again.
                </p>
            </form>
    </div>
  </div>
</div>
<script src="/cart_js/cart.js"></script> 
<script src="/cart_js/updateBtn.js"></script> 


</body>
</html>